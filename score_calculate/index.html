<html>
<head>
<title>總成績及GPA計算</title>
<style type="text/css">
label {
display:block;
margin:.25em 0em;
}
.button {
    color:aliceblue;
    background-color: blueviolet;
    width:100%px;
    height:30px;
    font-size: 15px;
}
div{
    width:500px;
    height:500px;
    position: absolute;
    left:38%;
    top:50px;
    border: 1px solid ;
}
table{
    width: 500px;
    height:100px;

}
table th{
    margin:0px;
    border:1px solid black;
    
}
.text{
    width:80px;
    height:20px;
    margin:5px;
}
#text1{
    position:relative;
    float:left;
}
#text2{
    position:relative;
    left:100px;
}
#bt1{
    position:relative;
    left:0px;
    margin:10px;
}
#bt3{
    position:relative;
    left:200px;
    margin:10px;
}
.bt{
    color:rgb(204, 73, 73);
    background-color:white;
    width:100px;
    height:50px;
}
#bt5{
    position:relative;
    left:-100px;
    top:200px;
}
#bt6{
    position:relative;
    left:150px;
    top:200px;
}
</style>
</head>
    <div>
    <table>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>
    <tr>
        <td><p id='text1'>成績<input type='text' class='text'></p></td>
        <td><p id='text2'>學分數<input type='text' class='text'></p></td>
    </tr>

        
    
    </table>
    <input type='button' class='button' id='bt1' value='增加'>
    <input type='button' class='button' id='bt2' value='減少'>
    <input type='button' class='bt' id='bt5' value='計算平均'>
    <input type='button' class='bt' id='bt6' value='計算gpa'>
    </div>

<script type="text/javascript">
    var otext = document.getElementsByClassName('text');
    var obt = document.getElementsByClassName('button');
    var obt1 = document.getElementsByClassName('bt');
    var num = 0 ;
    var arr = [];
    var arr2 = [];
    var gpa = 0;
    var otable = document.getElementById('table');
    for(i=0;i<otext.length;i++){
        otext[i].index = i
    otext[i].onkeydown = function(ev){
        ev = window.event || ev;
        if(ev.keyCode==13){
            otext[this.index+1].focus();
            //obt[0].focus();
        }
        if(ev.keyCode==46){
            otext[this.index-1].focus();
        }
    }
    otext[19].onkeydown = function(ev){
        ev = window.event || ev;
        if(ev.keyCode==13){
            obt1[0].focus();
        }
    }}
    function addtext(){
        otable += '<tr>'
        otable += '<td>'
        otable += 
        otable += '</td>'
        otable += '<td><p id="text2">學分數<input type="text" class="text"></p></td>'
        otable += '</tr>'
    }
    function deltext(){

    }
    for(i=0;i<=obt.length;i++){
    obt[0].onclick = function(){
        addtext();
    }
    obt[1].onclick = function(){
        deltext();
    }
    for(i=0;i<obt1.length;i++){
        obt1[i].index = i;
    obt1[i].onmousemove = function(){
        this.style.backgroundColor='black';
    }
    obt1[i].onmouseout = function(){
        this.style.backgroundColor='white';
    }
    }
    obt1[0].onclick = function(){
        num = 0;
        a=0;
        for(i=0;i<otext.length;i+=2){
            arr[i] = Number(otext[i].value);
        }
        for(j=1;j<otext.length;j+=2){
            arr[j] = Number(otext[j].value);
        }
        for(k=0;k<otext.length;k+=2){
            num += arr[k] * arr[k+1]
        }
        for(i=1;i<otext.length;i+=2){
            a += arr[i];
        }
        num = num / a;
        alert(num);
    }
    obt1[1].onclick = function(){
/* A 80 - 100 分 4 點
B 70 - 79 分 3 點
C 60 - 69 分 2 點
D 50 - 59 分 1 點
E 49 分以下 0 點 */
        gpa = 0;
        a = 0;
        for(i=0;i<otext.length;i+=2){
            otext1_value = Number(otext[i].value);
            a += arr[i+1];
            if(otext1_value>=80){
                gpa += arr[i+1] * 4}
            else if(otext1_value>=70){
                gpa += arr[i+1] * 3
            }
            else if(otext1_value>=60){
                gpa += arr[i+1] * 2
            }
            else if(otext1_value>=50){
                gpa += arr[i+1] * 1
            }
            else{
                gpa += 0;
            }
                }
                gpa = gpa / a;
    alert(gpa);
        }
    }
 /*    var textNumber = 1;
    var bt = document.getElementById('calcu');
    bt.onclick= function(){
        
            }
    function addTextBox(form, afterElement) {
    // Increment the textbox number
    textNumber++;
    // Create the label
    var label = document.createElement("label");
    // Create the textbox
    var textField = document.createElement("input");
    textField.setAttribute("type","text");
    textField.setAttribute("name","txt"+textNumber);
    textField.setAttribute("id","txt"+textNumber);
    // Add the label's text
    label.appendChild(document.createTextNode("成績"+textNumber+": "));
    // Put the textbox inside
    label.appendChild(textField);
    // Add it all to the form
    form.insertBefore(label,afterElement);
    return false;
    }
    
    
    
    function removeTextBox(form) {
    if (textNumber > 1) { // If there's more than one text box
        // Remove the last one added
        form.removeChild(document.getElementById("txt"+textNumber).parentNode);
        textNumber--;
    }
    }
    //--> */
    </script>
</html>




